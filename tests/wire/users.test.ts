// This file was auto-generated by Fern from our API Definition.

import * as Webflow from "../../src/api/index";
import { WebflowClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("Users", () => {
    test("list (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {
            count: 5,
            limit: 5,
            offset: 0,
            total: 201,
            users: [
                {
                    id: "6287ec36a841b25637c663df",
                    isEmailVerified: false,
                    lastUpdated: "2022-05-20T13:46:12Z",
                    invitedOn: "2016-10-24T19:41:29Z",
                    createdOn: "2022-05-20T13:46:12Z",
                    lastLogin: "2016-10-24T19:41:29Z",
                    status: "unverified",
                    accessGroups: [{ slug: "vogon-construction-crew", type: "admin" }],
                },
                {
                    id: "6287ec36a841b25637c663f0",
                    isEmailVerified: false,
                    lastUpdated: "2022-05-19T05:32:04Z",
                    invitedOn: "2016-10-24T19:41:29Z",
                    createdOn: "2022-05-19T05:32:04Z",
                    lastLogin: "2016-10-24T19:41:29Z",
                    status: "unverified",
                    accessGroups: [{ slug: "improbability-drive-test-subjects", type: "admin" }],
                },
                {
                    id: "6287ec36a841b25637c663d9",
                    isEmailVerified: true,
                    lastUpdated: "2022-05-17T03:34:06Z",
                    invitedOn: "2016-10-24T19:41:29Z",
                    createdOn: "2022-05-17T03:34:06Z",
                    lastLogin: "2016-10-24T19:41:29Z",
                    status: "verified",
                    accessGroups: [{ slug: "heart-of-gold-crew", type: "admin" }],
                },
                {
                    id: "6287ec37a841b25637c6641b",
                    isEmailVerified: false,
                    lastUpdated: "2022-05-15T03:46:09Z",
                    invitedOn: "2016-10-24T19:41:29Z",
                    createdOn: "2022-05-15T03:46:09Z",
                    lastLogin: "2016-10-24T19:41:29Z",
                    status: "unverified",
                    accessGroups: [{ slug: "hitchhikers-guide-research-team", type: "admin" }],
                },
                {
                    id: "6287ec37a841b25637c66449",
                    isEmailVerified: true,
                    lastUpdated: "2022-05-15T02:55:38Z",
                    invitedOn: "2016-10-24T19:41:29Z",
                    createdOn: "2022-05-15T02:55:38Z",
                    lastLogin: "2016-10-24T19:41:29Z",
                    status: "verified",
                    accessGroups: [{ slug: "milliways-reservationists", type: "admin" }],
                },
            ],
        };
        server
            .mockEndpoint()
            .get("/sites/580e63e98c9a982ac9b8b741/users")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.users.list("580e63e98c9a982ac9b8b741", {
            offset: 1.1,
            limit: 1.1,
            sort: "CreatedOn",
        });
        expect(response).toEqual({
            count: 5,
            limit: 5,
            offset: 0,
            total: 201,
            users: [
                {
                    id: "6287ec36a841b25637c663df",
                    isEmailVerified: false,
                    lastUpdated: new Date("2022-05-20T13:46:12.000Z"),
                    invitedOn: new Date("2016-10-24T19:41:29.000Z"),
                    createdOn: new Date("2022-05-20T13:46:12.000Z"),
                    lastLogin: new Date("2016-10-24T19:41:29.000Z"),
                    status: "unverified",
                    accessGroups: [
                        {
                            slug: "vogon-construction-crew",
                            type: "admin",
                        },
                    ],
                },
                {
                    id: "6287ec36a841b25637c663f0",
                    isEmailVerified: false,
                    lastUpdated: new Date("2022-05-19T05:32:04.000Z"),
                    invitedOn: new Date("2016-10-24T19:41:29.000Z"),
                    createdOn: new Date("2022-05-19T05:32:04.000Z"),
                    lastLogin: new Date("2016-10-24T19:41:29.000Z"),
                    status: "unverified",
                    accessGroups: [
                        {
                            slug: "improbability-drive-test-subjects",
                            type: "admin",
                        },
                    ],
                },
                {
                    id: "6287ec36a841b25637c663d9",
                    isEmailVerified: true,
                    lastUpdated: new Date("2022-05-17T03:34:06.000Z"),
                    invitedOn: new Date("2016-10-24T19:41:29.000Z"),
                    createdOn: new Date("2022-05-17T03:34:06.000Z"),
                    lastLogin: new Date("2016-10-24T19:41:29.000Z"),
                    status: "verified",
                    accessGroups: [
                        {
                            slug: "heart-of-gold-crew",
                            type: "admin",
                        },
                    ],
                },
                {
                    id: "6287ec37a841b25637c6641b",
                    isEmailVerified: false,
                    lastUpdated: new Date("2022-05-15T03:46:09.000Z"),
                    invitedOn: new Date("2016-10-24T19:41:29.000Z"),
                    createdOn: new Date("2022-05-15T03:46:09.000Z"),
                    lastLogin: new Date("2016-10-24T19:41:29.000Z"),
                    status: "unverified",
                    accessGroups: [
                        {
                            slug: "hitchhikers-guide-research-team",
                            type: "admin",
                        },
                    ],
                },
                {
                    id: "6287ec37a841b25637c66449",
                    isEmailVerified: true,
                    lastUpdated: new Date("2022-05-15T02:55:38.000Z"),
                    invitedOn: new Date("2016-10-24T19:41:29.000Z"),
                    createdOn: new Date("2022-05-15T02:55:38.000Z"),
                    lastLogin: new Date("2016-10-24T19:41:29.000Z"),
                    status: "verified",
                    accessGroups: [
                        {
                            slug: "milliways-reservationists",
                            type: "admin",
                        },
                    ],
                },
            ],
        });
    });

    test("list (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/sites/site_id/users")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.list("site_id");
        }).rejects.toThrow(Webflow.BadRequestError);
    });

    test("list (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server
            .mockEndpoint()
            .get("/sites/site_id/users")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.list("site_id");
        }).rejects.toThrow(Webflow.UnauthorizedError);
    });

    test("list (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/sites/site_id/users")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.list("site_id");
        }).rejects.toThrow(Webflow.ForbiddenError);
    });

    test("list (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server
            .mockEndpoint()
            .get("/sites/site_id/users")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.list("site_id");
        }).rejects.toThrow(Webflow.NotFoundError);
    });

    test("list (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server
            .mockEndpoint()
            .get("/sites/site_id/users")
            .respondWith()
            .statusCode(429)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.list("site_id");
        }).rejects.toThrow(Webflow.TooManyRequestsError);
    });

    test("list (7)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server
            .mockEndpoint()
            .get("/sites/site_id/users")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.list("site_id");
        }).rejects.toThrow(Webflow.InternalServerError);
    });

    test("get (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {
            id: "6287ec36a841b25637c663df",
            isEmailVerified: true,
            lastUpdated: "2022-05-20T13:46:12Z",
            invitedOn: "2022-05-20T13:46:12Z",
            createdOn: "2022-05-20T13:46:12Z",
            lastLogin: "2022-05-20T13:46:12Z",
            status: "verified",
            accessGroups: [{ slug: "webflowers", type: "admin" }],
            data: {
                data: {
                    name: "name",
                    email: "email",
                    "accept-privacy": true,
                    "accept-communications": true,
                    additionalProperties: "additionalProperties",
                },
            },
        };
        server
            .mockEndpoint()
            .get("/sites/580e63e98c9a982ac9b8b741/users/580e63e98c9a982ac9b8b741")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.users.get("580e63e98c9a982ac9b8b741", "580e63e98c9a982ac9b8b741");
        expect(response).toEqual({
            id: "6287ec36a841b25637c663df",
            isEmailVerified: true,
            lastUpdated: new Date("2022-05-20T13:46:12.000Z"),
            invitedOn: new Date("2022-05-20T13:46:12.000Z"),
            createdOn: new Date("2022-05-20T13:46:12.000Z"),
            lastLogin: new Date("2022-05-20T13:46:12.000Z"),
            status: "verified",
            accessGroups: [
                {
                    slug: "webflowers",
                    type: "admin",
                },
            ],
            data: {
                data: {
                    name: "name",
                    email: "email",
                    acceptPrivacy: true,
                    acceptCommunications: true,
                    additionalProperties: "additionalProperties",
                },
            },
        });
    });

    test("get (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/sites/site_id/users/user_id")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.get("site_id", "user_id");
        }).rejects.toThrow(Webflow.BadRequestError);
    });

    test("get (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server
            .mockEndpoint()
            .get("/sites/site_id/users/user_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.get("site_id", "user_id");
        }).rejects.toThrow(Webflow.UnauthorizedError);
    });

    test("get (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/sites/site_id/users/user_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.get("site_id", "user_id");
        }).rejects.toThrow(Webflow.ForbiddenError);
    });

    test("get (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server
            .mockEndpoint()
            .get("/sites/site_id/users/user_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.get("site_id", "user_id");
        }).rejects.toThrow(Webflow.NotFoundError);
    });

    test("get (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server
            .mockEndpoint()
            .get("/sites/site_id/users/user_id")
            .respondWith()
            .statusCode(429)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.get("site_id", "user_id");
        }).rejects.toThrow(Webflow.TooManyRequestsError);
    });

    test("get (7)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server
            .mockEndpoint()
            .get("/sites/site_id/users/user_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.get("site_id", "user_id");
        }).rejects.toThrow(Webflow.InternalServerError);
    });

    test("delete (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        server
            .mockEndpoint()
            .delete("/sites/580e63e98c9a982ac9b8b741/users/580e63e98c9a982ac9b8b741")
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.users.delete("580e63e98c9a982ac9b8b741", "580e63e98c9a982ac9b8b741");
        expect(response).toEqual(undefined);
    });

    test("delete (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .delete("/sites/site_id/users/user_id")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.delete("site_id", "user_id");
        }).rejects.toThrow(Webflow.BadRequestError);
    });

    test("delete (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server
            .mockEndpoint()
            .delete("/sites/site_id/users/user_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.delete("site_id", "user_id");
        }).rejects.toThrow(Webflow.UnauthorizedError);
    });

    test("delete (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .delete("/sites/site_id/users/user_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.delete("site_id", "user_id");
        }).rejects.toThrow(Webflow.ForbiddenError);
    });

    test("delete (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server
            .mockEndpoint()
            .delete("/sites/site_id/users/user_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.delete("site_id", "user_id");
        }).rejects.toThrow(Webflow.NotFoundError);
    });

    test("delete (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server
            .mockEndpoint()
            .delete("/sites/site_id/users/user_id")
            .respondWith()
            .statusCode(429)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.delete("site_id", "user_id");
        }).rejects.toThrow(Webflow.TooManyRequestsError);
    });

    test("delete (7)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server
            .mockEndpoint()
            .delete("/sites/site_id/users/user_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.delete("site_id", "user_id");
        }).rejects.toThrow(Webflow.InternalServerError);
    });

    test("update (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {
            id: "6287ec36a841b25637c663df",
            isEmailVerified: true,
            lastUpdated: "2022-05-20T13:46:12Z",
            invitedOn: "2022-05-20T13:46:12Z",
            createdOn: "2022-05-20T13:46:12Z",
            lastLogin: "2022-05-20T13:46:12Z",
            status: "verified",
            accessGroups: [{ slug: "webflowers", type: "admin" }],
        };
        const rawResponseBody = {
            id: "6287ec36a841b25637c663df",
            isEmailVerified: true,
            lastUpdated: "2022-05-20T13:46:12Z",
            invitedOn: "2022-05-20T13:46:12Z",
            createdOn: "2022-05-20T13:46:12Z",
            lastLogin: "2022-05-20T13:46:12Z",
            status: "verified",
            accessGroups: [{ slug: "webflowers", type: "admin" }],
            data: {
                data: {
                    name: "name",
                    email: "email",
                    "accept-privacy": true,
                    "accept-communications": true,
                    additionalProperties: "additionalProperties",
                },
            },
        };
        server
            .mockEndpoint()
            .patch("/sites/580e63e98c9a982ac9b8b741/users/580e63e98c9a982ac9b8b741")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.users.update("580e63e98c9a982ac9b8b741", "580e63e98c9a982ac9b8b741", {
            id: "6287ec36a841b25637c663df",
            isEmailVerified: true,
            lastUpdated: new Date("2022-05-20T13:46:12.000Z"),
            invitedOn: new Date("2022-05-20T13:46:12.000Z"),
            createdOn: new Date("2022-05-20T13:46:12.000Z"),
            lastLogin: new Date("2022-05-20T13:46:12.000Z"),
            status: "verified",
            accessGroups: [
                {
                    slug: "webflowers",
                    type: "admin",
                },
            ],
        });
        expect(response).toEqual({
            id: "6287ec36a841b25637c663df",
            isEmailVerified: true,
            lastUpdated: new Date("2022-05-20T13:46:12.000Z"),
            invitedOn: new Date("2022-05-20T13:46:12.000Z"),
            createdOn: new Date("2022-05-20T13:46:12.000Z"),
            lastLogin: new Date("2022-05-20T13:46:12.000Z"),
            status: "verified",
            accessGroups: [
                {
                    slug: "webflowers",
                    type: "admin",
                },
            ],
            data: {
                data: {
                    name: "name",
                    email: "email",
                    acceptPrivacy: true,
                    acceptCommunications: true,
                    additionalProperties: "additionalProperties",
                },
            },
        });
    });

    test("update (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/sites/site_id/users/user_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.update("site_id", "user_id", {});
        }).rejects.toThrow(Webflow.BadRequestError);
    });

    test("update (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .patch("/sites/site_id/users/user_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.update("site_id", "user_id", {});
        }).rejects.toThrow(Webflow.UnauthorizedError);
    });

    test("update (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/sites/site_id/users/user_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.update("site_id", "user_id", {});
        }).rejects.toThrow(Webflow.ForbiddenError);
    });

    test("update (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .patch("/sites/site_id/users/user_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.update("site_id", "user_id", {});
        }).rejects.toThrow(Webflow.NotFoundError);
    });

    test("update (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .patch("/sites/site_id/users/user_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(429)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.update("site_id", "user_id", {});
        }).rejects.toThrow(Webflow.TooManyRequestsError);
    });

    test("update (7)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .patch("/sites/site_id/users/user_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.update("site_id", "user_id", {});
        }).rejects.toThrow(Webflow.InternalServerError);
    });

    test("invite (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = { email: "some.one@home.com", accessGroups: ["accessGroups"] };
        const rawResponseBody = {
            id: "6287ec36a841b25637c663df",
            isEmailVerified: true,
            lastUpdated: "2022-05-20T13:46:12Z",
            invitedOn: "2022-05-20T13:46:12Z",
            createdOn: "2022-05-20T13:46:12Z",
            lastLogin: "2022-05-20T13:46:12Z",
            status: "verified",
            accessGroups: [{ slug: "webflowers", type: "admin" }],
            data: {
                data: {
                    name: "name",
                    email: "email",
                    "accept-privacy": true,
                    "accept-communications": true,
                    additionalProperties: "additionalProperties",
                },
            },
        };
        server
            .mockEndpoint()
            .post("/sites/580e63e98c9a982ac9b8b741/users/invite")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.users.invite("580e63e98c9a982ac9b8b741", {
            email: "some.one@home.com",
            accessGroups: ["accessGroups"],
        });
        expect(response).toEqual({
            id: "6287ec36a841b25637c663df",
            isEmailVerified: true,
            lastUpdated: new Date("2022-05-20T13:46:12.000Z"),
            invitedOn: new Date("2022-05-20T13:46:12.000Z"),
            createdOn: new Date("2022-05-20T13:46:12.000Z"),
            lastLogin: new Date("2022-05-20T13:46:12.000Z"),
            status: "verified",
            accessGroups: [
                {
                    slug: "webflowers",
                    type: "admin",
                },
            ],
            data: {
                data: {
                    name: "name",
                    email: "email",
                    acceptPrivacy: true,
                    acceptCommunications: true,
                    additionalProperties: "additionalProperties",
                },
            },
        });
    });

    test("invite (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = { email: "email" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/sites/site_id/users/invite")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.invite("site_id", {
                email: "email",
            });
        }).rejects.toThrow(Webflow.BadRequestError);
    });

    test("invite (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = { email: "email" };
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .post("/sites/site_id/users/invite")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.invite("site_id", {
                email: "email",
            });
        }).rejects.toThrow(Webflow.UnauthorizedError);
    });

    test("invite (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = { email: "email" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/sites/site_id/users/invite")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.invite("site_id", {
                email: "email",
            });
        }).rejects.toThrow(Webflow.ForbiddenError);
    });

    test("invite (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = { email: "email" };
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .post("/sites/site_id/users/invite")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.invite("site_id", {
                email: "email",
            });
        }).rejects.toThrow(Webflow.NotFoundError);
    });

    test("invite (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = { email: "email" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/sites/site_id/users/invite")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(409)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.invite("site_id", {
                email: "email",
            });
        }).rejects.toThrow(Webflow.ConflictError);
    });

    test("invite (7)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = { email: "email" };
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .post("/sites/site_id/users/invite")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(429)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.invite("site_id", {
                email: "email",
            });
        }).rejects.toThrow(Webflow.TooManyRequestsError);
    });

    test("invite (8)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = { email: "email" };
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .post("/sites/site_id/users/invite")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.users.invite("site_id", {
                email: "email",
            });
        }).rejects.toThrow(Webflow.InternalServerError);
    });
});
