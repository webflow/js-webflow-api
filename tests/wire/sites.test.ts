// This file was auto-generated by Fern from our API Definition.

import * as Webflow from "../../src/api/index";
import { WebflowClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("Sites", () => {
    test("create (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = { name: "The Hitchhiker's Guide to the Galaxy" };
        const rawResponseBody = {
            id: "670ecf86817e3cc7a510eb6a",
            workspaceId: "625860a7a6c16d624927122f",
            createdOn: "2024-10-15T20:24:38Z",
            displayName: "The Hitchiker's Guide",
            shortName: "hitchikers-guide",
            lastPublished: "2016-10-24T19:43:17Z",
            lastUpdated: "2024-10-15T20:24:38Z",
            previewUrl: "https://dev-assets.website-files.com/580e63e98c9a982ac9b8b741/201610241243.png",
            timeZone: "America/Los_Angeles",
            parentFolderId: "670ece123598db72d9648be1",
            customDomains: [
                { id: "589a331aa51e760df7ccb89d", url: "test-api-domain.com", lastPublished: "2022-12-07T16:51:37Z" },
            ],
            locales: {
                primary: {
                    id: "653fd9af6a07fc9cfd7a5e57",
                    cmsLocaleId: "653ad57de882f528b32e810e",
                    enabled: false,
                    displayName: "English (United States)",
                    displayImageId: "displayImageId",
                    redirect: true,
                    subdirectory: "",
                    tag: "en-US",
                },
                secondary: [
                    {
                        id: "653fd9af6a07fc9cfd7a5e57",
                        cmsLocaleId: "653ad57de882f528b32e810e",
                        enabled: false,
                        displayName: "English (United States)",
                        redirect: true,
                        subdirectory: "",
                        tag: "en-US",
                    },
                ],
            },
            dataCollectionEnabled: true,
            dataCollectionType: "always",
        };
        server
            .mockEndpoint()
            .post("/workspaces/580e63e98c9a982ac9b8b741/sites")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.sites.create("580e63e98c9a982ac9b8b741", {
            name: "The Hitchhiker's Guide to the Galaxy",
        });
        expect(response).toEqual({
            id: "670ecf86817e3cc7a510eb6a",
            workspaceId: "625860a7a6c16d624927122f",
            createdOn: new Date("2024-10-15T20:24:38.000Z"),
            displayName: "The Hitchiker's Guide",
            shortName: "hitchikers-guide",
            lastPublished: new Date("2016-10-24T19:43:17.000Z"),
            lastUpdated: new Date("2024-10-15T20:24:38.000Z"),
            previewUrl: "https://dev-assets.website-files.com/580e63e98c9a982ac9b8b741/201610241243.png",
            timeZone: "America/Los_Angeles",
            parentFolderId: "670ece123598db72d9648be1",
            customDomains: [
                {
                    id: "589a331aa51e760df7ccb89d",
                    url: "test-api-domain.com",
                    lastPublished: new Date("2022-12-07T16:51:37.000Z"),
                },
            ],
            locales: {
                primary: {
                    id: "653fd9af6a07fc9cfd7a5e57",
                    cmsLocaleId: "653ad57de882f528b32e810e",
                    enabled: false,
                    displayName: "English (United States)",
                    displayImageId: "displayImageId",
                    redirect: true,
                    subdirectory: "",
                    tag: "en-US",
                },
                secondary: [
                    {
                        id: "653fd9af6a07fc9cfd7a5e57",
                        cmsLocaleId: "653ad57de882f528b32e810e",
                        enabled: false,
                        displayName: "English (United States)",
                        redirect: true,
                        subdirectory: "",
                        tag: "en-US",
                    },
                ],
            },
            dataCollectionEnabled: true,
            dataCollectionType: "always",
        });
    });

    test("create (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = { name: "name" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/workspaces/workspace_id/sites")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.create("workspace_id", {
                name: "name",
            });
        }).rejects.toThrow(Webflow.BadRequestError);
    });

    test("create (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = { name: "name" };
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .post("/workspaces/workspace_id/sites")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.create("workspace_id", {
                name: "name",
            });
        }).rejects.toThrow(Webflow.UnauthorizedError);
    });

    test("create (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = { name: "name" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/workspaces/workspace_id/sites")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.create("workspace_id", {
                name: "name",
            });
        }).rejects.toThrow(Webflow.ForbiddenError);
    });

    test("create (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = { name: "name" };
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .post("/workspaces/workspace_id/sites")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.create("workspace_id", {
                name: "name",
            });
        }).rejects.toThrow(Webflow.NotFoundError);
    });

    test("create (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = { name: "name" };
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .post("/workspaces/workspace_id/sites")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(429)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.create("workspace_id", {
                name: "name",
            });
        }).rejects.toThrow(Webflow.TooManyRequestsError);
    });

    test("create (7)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = { name: "name" };
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .post("/workspaces/workspace_id/sites")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.create("workspace_id", {
                name: "name",
            });
        }).rejects.toThrow(Webflow.InternalServerError);
    });

    test("list (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {
            sites: [
                {
                    id: "42e63e98c9a982ac9b8b741",
                    workspaceId: "42e63fc8c9a982ac9b8b744",
                    createdOn: "1979-10-12T12:00:00Z",
                    displayName: "Heart of Gold Spaceship",
                    shortName: "heart-of-gold",
                    lastPublished: "2023-04-02T12:42:00Z",
                    lastUpdated: "2016-10-24T19:43:17Z",
                    previewUrl: "https://dev-assets.website-files.com/42e63e98c9a982ac9b8b741/197910121200.png",
                    timeZone: "DeepSpace/InfiniteImprobability",
                    parentFolderId: "1as2d3f4g5h6j7k8l9z0x1c2v3b4n5m6",
                    customDomains: [
                        {
                            id: "589a331aa51e760df7ccb89e",
                            url: "heartofgold.galaxy",
                            lastPublished: "2022-12-07T16:51:37Z",
                        },
                    ],
                    locales: {
                        primary: {
                            id: "653fd9af6a07fc9cfd7a5e57",
                            cmsLocaleId: "653ad57de882f528b32e810e",
                            enabled: true,
                            displayName: "English - Heart of Gold Standard",
                            redirect: false,
                            subdirectory: "/en",
                            tag: "The Ultimate Answer",
                        },
                        secondary: [
                            {
                                id: "653fd9af6a07fc9cfd7a5e58",
                                cmsLocaleId: "653ad57de882f528b32e810g",
                                enabled: true,
                                displayName: "Betelgeusian - Vogon Liaison",
                                redirect: true,
                                subdirectory: "/bet",
                                tag: "Vogon",
                            },
                            {
                                id: "653fd9af6a07fc9cfd7a5e59",
                                cmsLocaleId: "653ad57de882f528b32e810h",
                                enabled: false,
                                displayName: "Magrathean - Custom Planet Designs",
                                redirect: true,
                                subdirectory: "/mg",
                                tag: "Magrathean",
                            },
                        ],
                    },
                    dataCollectionEnabled: true,
                    dataCollectionType: "always",
                },
                {
                    id: "42e63e98c9a982ac9b8b742",
                    workspaceId: "42e63fc8c9a982ac9b8b745",
                    createdOn: "1981-10-12T12:00:00Z",
                    displayName: "Marvin's Personal Blog",
                    shortName: "paranoid-android",
                    lastPublished: "2023-04-02T12:45:00Z",
                    lastUpdated: "2016-10-24T19:43:17Z",
                    previewUrl: "https://dev-assets.website-files.com/42e63e98c9a982ac9b8b742/198110121200.png",
                    timeZone: "DeepSpace/Depression",
                    parentFolderId: "1as2d3f4g5h6j7k8l9z0x1c2v3b4n5m6",
                    customDomains: [
                        { id: "589a331aa51e760df7ccb89f", url: "marvin.blog", lastPublished: "2022-12-07T16:51:37Z" },
                    ],
                    locales: {
                        primary: {
                            id: "653fd9af6a07fc9cfd7a5e57",
                            cmsLocaleId: "653ad57de882f528b32e810e",
                            enabled: true,
                            displayName: "English - Marvin's Musings",
                            redirect: false,
                            subdirectory: "/en",
                            tag: "English",
                        },
                        secondary: [
                            {
                                id: "653fd9af6a07fc9cfd7a5e56",
                                cmsLocaleId: "653ad57de882f528b32e810f",
                                enabled: true,
                                displayName: "Squornshellous - Mattress Speak",
                                redirect: true,
                                subdirectory: "/sr",
                                tag: "Squornshellous",
                            },
                        ],
                    },
                    dataCollectionEnabled: true,
                    dataCollectionType: "always",
                },
                {
                    id: "42e63e98c9a982ac9b8b743",
                    workspaceId: "42e63fc8c9a982ac9b8b746",
                    createdOn: "1982-10-12T12:00:00Z",
                    displayName: "Vogon Poetry Archive",
                    shortName: "vogon-poetry",
                    lastPublished: "2023-04-02T12:50:00Z",
                    lastUpdated: "2016-10-24T19:43:17Z",
                    previewUrl: "https://dev-assets.website-files.com/42e63e98c9a982ac9b8b743/198210121200.png",
                    timeZone: "Vogsphere/PoetryHall",
                    parentFolderId: "1as2d3f4g5h6j7k8l9z0x1c2v3b4n5m6",
                    customDomains: [
                        {
                            id: "589a331aa51e760df7ccb8a0",
                            url: "vogonpoetry.galaxy",
                            lastPublished: "2022-12-07T16:51:37Z",
                        },
                    ],
                    locales: {
                        primary: {
                            id: "653fd9af6a07fc9cfd7a5e55",
                            cmsLocaleId: "653ad57de882f528b32e810d",
                            enabled: true,
                            displayName: "English - Vogon Verse",
                            redirect: false,
                            subdirectory: "/en",
                            tag: "Third Worst Poetry",
                        },
                        secondary: [
                            {
                                id: "653fd9af6a07fc9cfd7a5e54",
                                cmsLocaleId: "653ad57de882f528b32e810c",
                                enabled: true,
                                displayName: "Galactic - Universal Language",
                                redirect: true,
                                subdirectory: "/gl",
                                tag: "Pan-Galactic Gargle Blaster",
                            },
                        ],
                    },
                    dataCollectionEnabled: true,
                    dataCollectionType: "always",
                },
            ],
        };
        server.mockEndpoint().get("/sites").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.sites.list();
        expect(response).toEqual({
            sites: [
                {
                    id: "42e63e98c9a982ac9b8b741",
                    workspaceId: "42e63fc8c9a982ac9b8b744",
                    createdOn: new Date("1979-10-12T12:00:00.000Z"),
                    displayName: "Heart of Gold Spaceship",
                    shortName: "heart-of-gold",
                    lastPublished: new Date("2023-04-02T12:42:00.000Z"),
                    lastUpdated: new Date("2016-10-24T19:43:17.000Z"),
                    previewUrl: "https://dev-assets.website-files.com/42e63e98c9a982ac9b8b741/197910121200.png",
                    timeZone: "DeepSpace/InfiniteImprobability",
                    parentFolderId: "1as2d3f4g5h6j7k8l9z0x1c2v3b4n5m6",
                    customDomains: [
                        {
                            id: "589a331aa51e760df7ccb89e",
                            url: "heartofgold.galaxy",
                            lastPublished: new Date("2022-12-07T16:51:37.000Z"),
                        },
                    ],
                    locales: {
                        primary: {
                            id: "653fd9af6a07fc9cfd7a5e57",
                            cmsLocaleId: "653ad57de882f528b32e810e",
                            enabled: true,
                            displayName: "English - Heart of Gold Standard",
                            redirect: false,
                            subdirectory: "/en",
                            tag: "The Ultimate Answer",
                        },
                        secondary: [
                            {
                                id: "653fd9af6a07fc9cfd7a5e58",
                                cmsLocaleId: "653ad57de882f528b32e810g",
                                enabled: true,
                                displayName: "Betelgeusian - Vogon Liaison",
                                redirect: true,
                                subdirectory: "/bet",
                                tag: "Vogon",
                            },
                            {
                                id: "653fd9af6a07fc9cfd7a5e59",
                                cmsLocaleId: "653ad57de882f528b32e810h",
                                enabled: false,
                                displayName: "Magrathean - Custom Planet Designs",
                                redirect: true,
                                subdirectory: "/mg",
                                tag: "Magrathean",
                            },
                        ],
                    },
                    dataCollectionEnabled: true,
                    dataCollectionType: "always",
                },
                {
                    id: "42e63e98c9a982ac9b8b742",
                    workspaceId: "42e63fc8c9a982ac9b8b745",
                    createdOn: new Date("1981-10-12T12:00:00.000Z"),
                    displayName: "Marvin's Personal Blog",
                    shortName: "paranoid-android",
                    lastPublished: new Date("2023-04-02T12:45:00.000Z"),
                    lastUpdated: new Date("2016-10-24T19:43:17.000Z"),
                    previewUrl: "https://dev-assets.website-files.com/42e63e98c9a982ac9b8b742/198110121200.png",
                    timeZone: "DeepSpace/Depression",
                    parentFolderId: "1as2d3f4g5h6j7k8l9z0x1c2v3b4n5m6",
                    customDomains: [
                        {
                            id: "589a331aa51e760df7ccb89f",
                            url: "marvin.blog",
                            lastPublished: new Date("2022-12-07T16:51:37.000Z"),
                        },
                    ],
                    locales: {
                        primary: {
                            id: "653fd9af6a07fc9cfd7a5e57",
                            cmsLocaleId: "653ad57de882f528b32e810e",
                            enabled: true,
                            displayName: "English - Marvin's Musings",
                            redirect: false,
                            subdirectory: "/en",
                            tag: "English",
                        },
                        secondary: [
                            {
                                id: "653fd9af6a07fc9cfd7a5e56",
                                cmsLocaleId: "653ad57de882f528b32e810f",
                                enabled: true,
                                displayName: "Squornshellous - Mattress Speak",
                                redirect: true,
                                subdirectory: "/sr",
                                tag: "Squornshellous",
                            },
                        ],
                    },
                    dataCollectionEnabled: true,
                    dataCollectionType: "always",
                },
                {
                    id: "42e63e98c9a982ac9b8b743",
                    workspaceId: "42e63fc8c9a982ac9b8b746",
                    createdOn: new Date("1982-10-12T12:00:00.000Z"),
                    displayName: "Vogon Poetry Archive",
                    shortName: "vogon-poetry",
                    lastPublished: new Date("2023-04-02T12:50:00.000Z"),
                    lastUpdated: new Date("2016-10-24T19:43:17.000Z"),
                    previewUrl: "https://dev-assets.website-files.com/42e63e98c9a982ac9b8b743/198210121200.png",
                    timeZone: "Vogsphere/PoetryHall",
                    parentFolderId: "1as2d3f4g5h6j7k8l9z0x1c2v3b4n5m6",
                    customDomains: [
                        {
                            id: "589a331aa51e760df7ccb8a0",
                            url: "vogonpoetry.galaxy",
                            lastPublished: new Date("2022-12-07T16:51:37.000Z"),
                        },
                    ],
                    locales: {
                        primary: {
                            id: "653fd9af6a07fc9cfd7a5e55",
                            cmsLocaleId: "653ad57de882f528b32e810d",
                            enabled: true,
                            displayName: "English - Vogon Verse",
                            redirect: false,
                            subdirectory: "/en",
                            tag: "Third Worst Poetry",
                        },
                        secondary: [
                            {
                                id: "653fd9af6a07fc9cfd7a5e54",
                                cmsLocaleId: "653ad57de882f528b32e810c",
                                enabled: true,
                                displayName: "Galactic - Universal Language",
                                redirect: true,
                                subdirectory: "/gl",
                                tag: "Pan-Galactic Gargle Blaster",
                            },
                        ],
                    },
                    dataCollectionEnabled: true,
                    dataCollectionType: "always",
                },
            ],
        });
    });

    test("list (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server.mockEndpoint().get("/sites").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.sites.list();
        }).rejects.toThrow(Webflow.UnauthorizedError);
    });

    test("list (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server.mockEndpoint().get("/sites").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.sites.list();
        }).rejects.toThrow(Webflow.NotFoundError);
    });

    test("list (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server.mockEndpoint().get("/sites").respondWith().statusCode(429).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.sites.list();
        }).rejects.toThrow(Webflow.TooManyRequestsError);
    });

    test("get (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {
            id: "42e98c9a982ac9b8b742",
            workspaceId: "42e63e98c9a982ac9b8b742",
            createdOn: "1979-10-12T12:00:00Z",
            displayName: "The Hitchhiker's Guide to the Galaxy",
            shortName: "hitchhikers-guide",
            lastPublished: "2023-04-02T12:42:00Z",
            lastUpdated: "2023-04-02T12:42:00Z",
            previewUrl:
                "https://screenshots.webflow.com/sites/6258612d1ee792848f805dcf/20231219211811_d5990556c743f33b7071300a03bf67e6.png",
            timeZone: "Magrathea/FactoryFloor",
            parentFolderId: "1as2d3f4g5h6j7k8l9z0x1c2v3b4n5m6",
            customDomains: [
                {
                    id: "589a331aa51e760df7ccb89d",
                    url: "hitchhikersguide.galaxy",
                    lastPublished: "2022-12-07T16:51:37Z",
                },
                { id: "589a331aa51e760df7ccb89e", url: "heartofgold.spaceship", lastPublished: "2022-12-07T16:51:37Z" },
            ],
            locales: {
                primary: {
                    id: "653fd9af6a07fc9cfd7a5e57",
                    cmsLocaleId: "653ad57de882f528b32e810e",
                    enabled: false,
                    displayName: "English (United States)",
                    displayImageId: "displayImageId",
                    redirect: true,
                    subdirectory: "",
                    tag: "en-US",
                },
                secondary: [
                    {
                        id: "653fd9af6a07fc9cfd7a5e57",
                        cmsLocaleId: "653ad57de882f528b32e810e",
                        enabled: false,
                        displayName: "English (United States)",
                        redirect: true,
                        subdirectory: "",
                        tag: "en-US",
                    },
                ],
            },
            dataCollectionEnabled: true,
            dataCollectionType: "always",
        };
        server
            .mockEndpoint()
            .get("/sites/580e63e98c9a982ac9b8b741")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.sites.get("580e63e98c9a982ac9b8b741");
        expect(response).toEqual({
            id: "42e98c9a982ac9b8b742",
            workspaceId: "42e63e98c9a982ac9b8b742",
            createdOn: new Date("1979-10-12T12:00:00.000Z"),
            displayName: "The Hitchhiker's Guide to the Galaxy",
            shortName: "hitchhikers-guide",
            lastPublished: new Date("2023-04-02T12:42:00.000Z"),
            lastUpdated: new Date("2023-04-02T12:42:00.000Z"),
            previewUrl:
                "https://screenshots.webflow.com/sites/6258612d1ee792848f805dcf/20231219211811_d5990556c743f33b7071300a03bf67e6.png",
            timeZone: "Magrathea/FactoryFloor",
            parentFolderId: "1as2d3f4g5h6j7k8l9z0x1c2v3b4n5m6",
            customDomains: [
                {
                    id: "589a331aa51e760df7ccb89d",
                    url: "hitchhikersguide.galaxy",
                    lastPublished: new Date("2022-12-07T16:51:37.000Z"),
                },
                {
                    id: "589a331aa51e760df7ccb89e",
                    url: "heartofgold.spaceship",
                    lastPublished: new Date("2022-12-07T16:51:37.000Z"),
                },
            ],
            locales: {
                primary: {
                    id: "653fd9af6a07fc9cfd7a5e57",
                    cmsLocaleId: "653ad57de882f528b32e810e",
                    enabled: false,
                    displayName: "English (United States)",
                    displayImageId: "displayImageId",
                    redirect: true,
                    subdirectory: "",
                    tag: "en-US",
                },
                secondary: [
                    {
                        id: "653fd9af6a07fc9cfd7a5e57",
                        cmsLocaleId: "653ad57de882f528b32e810e",
                        enabled: false,
                        displayName: "English (United States)",
                        redirect: true,
                        subdirectory: "",
                        tag: "en-US",
                    },
                ],
            },
            dataCollectionEnabled: true,
            dataCollectionType: "always",
        });
    });

    test("get (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().get("/sites/site_id").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.sites.get("site_id");
        }).rejects.toThrow(Webflow.BadRequestError);
    });

    test("get (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server.mockEndpoint().get("/sites/site_id").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.sites.get("site_id");
        }).rejects.toThrow(Webflow.UnauthorizedError);
    });

    test("get (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server.mockEndpoint().get("/sites/site_id").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.sites.get("site_id");
        }).rejects.toThrow(Webflow.NotFoundError);
    });

    test("get (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server.mockEndpoint().get("/sites/site_id").respondWith().statusCode(429).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.sites.get("site_id");
        }).rejects.toThrow(Webflow.TooManyRequestsError);
    });

    test("get (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server.mockEndpoint().get("/sites/site_id").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.sites.get("site_id");
        }).rejects.toThrow(Webflow.InternalServerError);
    });

    test("delete (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        server.mockEndpoint().delete("/sites/580e63e98c9a982ac9b8b741").respondWith().statusCode(200).build();

        const response = await client.sites.delete("580e63e98c9a982ac9b8b741");
        expect(response).toEqual(undefined);
    });

    test("delete (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().delete("/sites/site_id").respondWith().statusCode(400).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.sites.delete("site_id");
        }).rejects.toThrow(Webflow.BadRequestError);
    });

    test("delete (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server.mockEndpoint().delete("/sites/site_id").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.sites.delete("site_id");
        }).rejects.toThrow(Webflow.UnauthorizedError);
    });

    test("delete (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().delete("/sites/site_id").respondWith().statusCode(403).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.sites.delete("site_id");
        }).rejects.toThrow(Webflow.ForbiddenError);
    });

    test("delete (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server.mockEndpoint().delete("/sites/site_id").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.sites.delete("site_id");
        }).rejects.toThrow(Webflow.NotFoundError);
    });

    test("delete (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server.mockEndpoint().delete("/sites/site_id").respondWith().statusCode(429).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.sites.delete("site_id");
        }).rejects.toThrow(Webflow.TooManyRequestsError);
    });

    test("delete (7)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server.mockEndpoint().delete("/sites/site_id").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.sites.delete("site_id");
        }).rejects.toThrow(Webflow.InternalServerError);
    });

    test("update (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = {
            id: "42e98c9a982ac9b8b742",
            workspaceId: "42e63e98c9a982ac9b8b742",
            createdOn: "1979-10-12T12:00:00Z",
            displayName: "The Hitchhiker's Guide to the Galaxy",
            shortName: "hitchhikers-guide",
            lastPublished: "2023-04-02T12:42:00Z",
            lastUpdated: "2023-04-02T12:42:00Z",
            previewUrl:
                "https://screenshots.webflow.com/sites/6258612d1ee792848f805dcf/20231219211811_d5990556c743f33b7071300a03bf67e6.png",
            timeZone: "Magrathea/FactoryFloor",
            parentFolderId: "1as2d3f4g5h6j7k8l9z0x1c2v3b4n5m6",
            customDomains: [
                {
                    id: "589a331aa51e760df7ccb89d",
                    url: "hitchhikersguide.galaxy",
                    lastPublished: "2022-12-07T16:51:37Z",
                },
                { id: "589a331aa51e760df7ccb89e", url: "heartofgold.spaceship", lastPublished: "2022-12-07T16:51:37Z" },
            ],
            locales: {
                primary: {
                    id: "653fd9af6a07fc9cfd7a5e57",
                    cmsLocaleId: "653ad57de882f528b32e810e",
                    enabled: false,
                    displayName: "English (United States)",
                    displayImageId: "displayImageId",
                    redirect: true,
                    subdirectory: "",
                    tag: "en-US",
                },
                secondary: [
                    {
                        id: "653fd9af6a07fc9cfd7a5e57",
                        cmsLocaleId: "653ad57de882f528b32e810e",
                        enabled: false,
                        displayName: "English (United States)",
                        redirect: true,
                        subdirectory: "",
                        tag: "en-US",
                    },
                ],
            },
            dataCollectionEnabled: true,
            dataCollectionType: "always",
        };
        server
            .mockEndpoint()
            .patch("/sites/580e63e98c9a982ac9b8b741")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.sites.update("580e63e98c9a982ac9b8b741");
        expect(response).toEqual({
            id: "42e98c9a982ac9b8b742",
            workspaceId: "42e63e98c9a982ac9b8b742",
            createdOn: new Date("1979-10-12T12:00:00.000Z"),
            displayName: "The Hitchhiker's Guide to the Galaxy",
            shortName: "hitchhikers-guide",
            lastPublished: new Date("2023-04-02T12:42:00.000Z"),
            lastUpdated: new Date("2023-04-02T12:42:00.000Z"),
            previewUrl:
                "https://screenshots.webflow.com/sites/6258612d1ee792848f805dcf/20231219211811_d5990556c743f33b7071300a03bf67e6.png",
            timeZone: "Magrathea/FactoryFloor",
            parentFolderId: "1as2d3f4g5h6j7k8l9z0x1c2v3b4n5m6",
            customDomains: [
                {
                    id: "589a331aa51e760df7ccb89d",
                    url: "hitchhikersguide.galaxy",
                    lastPublished: new Date("2022-12-07T16:51:37.000Z"),
                },
                {
                    id: "589a331aa51e760df7ccb89e",
                    url: "heartofgold.spaceship",
                    lastPublished: new Date("2022-12-07T16:51:37.000Z"),
                },
            ],
            locales: {
                primary: {
                    id: "653fd9af6a07fc9cfd7a5e57",
                    cmsLocaleId: "653ad57de882f528b32e810e",
                    enabled: false,
                    displayName: "English (United States)",
                    displayImageId: "displayImageId",
                    redirect: true,
                    subdirectory: "",
                    tag: "en-US",
                },
                secondary: [
                    {
                        id: "653fd9af6a07fc9cfd7a5e57",
                        cmsLocaleId: "653ad57de882f528b32e810e",
                        enabled: false,
                        displayName: "English (United States)",
                        redirect: true,
                        subdirectory: "",
                        tag: "en-US",
                    },
                ],
            },
            dataCollectionEnabled: true,
            dataCollectionType: "always",
        });
    });

    test("update (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/sites/site_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.update("site_id");
        }).rejects.toThrow(Webflow.BadRequestError);
    });

    test("update (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .patch("/sites/site_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.update("site_id");
        }).rejects.toThrow(Webflow.UnauthorizedError);
    });

    test("update (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/sites/site_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.update("site_id");
        }).rejects.toThrow(Webflow.ForbiddenError);
    });

    test("update (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .patch("/sites/site_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.update("site_id");
        }).rejects.toThrow(Webflow.NotFoundError);
    });

    test("update (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .patch("/sites/site_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(429)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.update("site_id");
        }).rejects.toThrow(Webflow.TooManyRequestsError);
    });

    test("update (7)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .patch("/sites/site_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.update("site_id");
        }).rejects.toThrow(Webflow.InternalServerError);
    });

    test("get-custom-domain (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {
            customDomains: [
                {
                    id: "589a331aa51e760df7ccb89d",
                    url: "hitchhikersguide.galaxy",
                    lastPublished: "2022-12-07T16:51:37Z",
                },
                { id: "589a331aa51e760df7ccb89e", url: "heartofgold.spaceship", lastPublished: "2022-12-07T16:51:37Z" },
            ],
        };
        server
            .mockEndpoint()
            .get("/sites/580e63e98c9a982ac9b8b741/custom_domains")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.sites.getCustomDomain("580e63e98c9a982ac9b8b741");
        expect(response).toEqual({
            customDomains: [
                {
                    id: "589a331aa51e760df7ccb89d",
                    url: "hitchhikersguide.galaxy",
                    lastPublished: new Date("2022-12-07T16:51:37.000Z"),
                },
                {
                    id: "589a331aa51e760df7ccb89e",
                    url: "heartofgold.spaceship",
                    lastPublished: new Date("2022-12-07T16:51:37.000Z"),
                },
            ],
        });
    });

    test("get-custom-domain (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server
            .mockEndpoint()
            .get("/sites/site_id/custom_domains")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.getCustomDomain("site_id");
        }).rejects.toThrow(Webflow.UnauthorizedError);
    });

    test("get-custom-domain (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/sites/site_id/custom_domains")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.getCustomDomain("site_id");
        }).rejects.toThrow(Webflow.ForbiddenError);
    });

    test("get-custom-domain (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server
            .mockEndpoint()
            .get("/sites/site_id/custom_domains")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.getCustomDomain("site_id");
        }).rejects.toThrow(Webflow.NotFoundError);
    });

    test("get-custom-domain (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server
            .mockEndpoint()
            .get("/sites/site_id/custom_domains")
            .respondWith()
            .statusCode(429)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.getCustomDomain("site_id");
        }).rejects.toThrow(Webflow.TooManyRequestsError);
    });

    test("get-custom-domain (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });

        const rawResponseBody = {};
        server
            .mockEndpoint()
            .get("/sites/site_id/custom_domains")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.getCustomDomain("site_id");
        }).rejects.toThrow(Webflow.InternalServerError);
    });

    test("publish (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {
            customDomains: ["660c6449dd97ebc7346ac629", "660c6449dd97ebc7346ac62f"],
            publishToWebflowSubdomain: false,
        };
        const rawResponseBody = {
            customDomains: [
                { id: "589a331aa51e760df7ccb89d", url: "test-api-domain.com", lastPublished: "2022-12-07T16:51:37Z" },
            ],
            publishToWebflowSubdomain: true,
        };
        server
            .mockEndpoint()
            .post("/sites/580e63e98c9a982ac9b8b741/publish")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.sites.publish("580e63e98c9a982ac9b8b741", {
            customDomains: ["660c6449dd97ebc7346ac629", "660c6449dd97ebc7346ac62f"],
            publishToWebflowSubdomain: false,
        });
        expect(response).toEqual({
            customDomains: [
                {
                    id: "589a331aa51e760df7ccb89d",
                    url: "test-api-domain.com",
                    lastPublished: new Date("2022-12-07T16:51:37.000Z"),
                },
            ],
            publishToWebflowSubdomain: true,
        });
    });

    test("publish (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/sites/site_id/publish")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.publish("site_id");
        }).rejects.toThrow(Webflow.BadRequestError);
    });

    test("publish (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .post("/sites/site_id/publish")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.publish("site_id");
        }).rejects.toThrow(Webflow.UnauthorizedError);
    });

    test("publish (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/sites/site_id/publish")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.publish("site_id");
        }).rejects.toThrow(Webflow.ForbiddenError);
    });

    test("publish (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .post("/sites/site_id/publish")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.publish("site_id");
        }).rejects.toThrow(Webflow.NotFoundError);
    });

    test("publish (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new WebflowClient({
            accessToken: "test",
            environment: { base: server.baseUrl, dataApi: server.baseUrl, contentDeliveryApi: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = {};
        server
            .mockEndpoint()
            .post("/sites/site_id/publish")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(429)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.sites.publish("site_id");
        }).rejects.toThrow(Webflow.TooManyRequestsError);
    });
});
